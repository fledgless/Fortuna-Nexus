{% extends 'base.html.twig' %}

{% block title %}{{ character.name }}{% endblock %}

{% block body %}
    <div class="s-container">
        <div class="character-show {% if character.rarity == "4-star"%}four-star {% else %}five-star{% endif %}">
            <h1>{{ character.name }}</h1>
            <div class="character-asc-mats">
                {% if character.enemyDrops %}
                    <img src="/uploads/{{ character.enemyDrops.fourStarFilename }}" alt="">
                    <img src="/uploads/{{ character.enemyDrops.threeStarFilename }}" alt="">
                    <img src="/uploads/{{ character.enemyDrops.twoStarFilename }}" alt="">
                {% endif %}
                {% if character.stagnantShadowDrop %}
                    <img src="/uploads/{{ character.stagnantShadowDrop.filename }}" alt="">
                {% endif %}
                {% if character.pathMaterials %}
                    <img src="/uploads/{{ character.pathMaterials.fourStarFilename }}" alt="">
                    <img src="/uploads/{{ character.pathMaterials.threeStarFilename }}" alt="">
                    <img src="/uploads/{{ character.pathMaterials.twoStarFilename }}" alt="">
                {% endif %}
                {% if character.echoOfWarDrop %}
                    <img src="/uploads/{{ character.echoOfWarDrop.filename }}" alt="">
                {% endif %}
            </div>
            <div class="character-content">
                <nav>
                    <ul class="character-nav">
                        <li class="character-nav-link active" id="toggle-skills">Skills</li>
                        <li class="character-nav-link" id="toggle-traces">Traces</li>
                        <li class="character-nav-link" id="toggle-eidolons">Eidolons</li>
                        <li class="character-nav-link" id="toggle-voicelines">Voicelines</li>
                        <li class="character-nav-link" id="toggle-stories">Character stories</li>
                    </ul>
                </nav>
                <section class="open" id="skills">
                    <div class="content">
                        {% if character.characterKit.skills %}
                            <div class="skills">
                                {% include "characters/skills/list.html.twig" %}
                            </div>
                        {% else %}
                            <p>Skills to be added.</p>
                        {% endif %}                        
                    </div>
                </section>
                <section id="traces">
                    <div class="content">
                        {% if character.characterKit %}
                            <div class="traces">
                                {% include "characters/traces/item.html.twig" %}
                            </div>
                        {% else %}
                            <p>Traces to be added.</p>
                        {% endif %}                        
                    </div>
                </section>
                <section id="eidolons">
                    <div class="content">
                        {% if character.characterKit.eidolons %}
                            <div class="eidolons">
                                {% include "characters/eidolons/list.html.twig" %}
                            </div>
                        {% else %}
                            <p>Eidolons to be added.</p>
                        {% endif %}
                    </div>
                </section>
                <section id="voicelines">
                    <div class="content">
                        {% if character.voicelines %}
                            <div class="voicelines">
                                <h3>Voicelines</h3>
                                {% include "characters/voicelines/voiceline-list.html.twig" %}
                            </div>
                            <div class="voicelines">
                                <h3>Combat</h3>
                                {% include "characters/voicelines/combat-list.html.twig" %}
                            </div>
                        {% else %}
                            <p>Voicelines to be added.</p>
                        {% endif %}
                    </div>
                </section> 
                <section id="stories">
                    <div class="content">
                        {% if character.stories %}
                            {% include "characters/stories/item.html.twig" %}
                        {% else %}
                            <p>Character stories to be added.</p>
                        {% endif %}
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        let toggleSkills = document.querySelector('#toggle-skills'),
            toggleTraces = document.querySelector('#toggle-traces'),
            toggleEidolons = document.querySelector('#toggle-eidolons'),
            toggleVoicelines = document.querySelector('#toggle-voicelines'),
            toggleStories = document.querySelector('#toggle-stories'),
            allToggle = document.querySelectorAll('.character-nav-link');

        let skills = document.querySelector('#skills'),
            traces = document.querySelector('#traces'),
            eidolons = document.querySelector('#eidolons'),
            voicelines = document.querySelector('#voicelines'),
            stories = document.querySelector('#stories'),
            sections = document.querySelectorAll('section');

            toggleSkills.addEventListener("click", () => {
                sections.forEach(section => {
                    section.classList.remove('open');
                })
                skills.classList.add('open');
                allToggle.forEach(toggle => {
                    toggle.classList.remove('active');
                })
                toggleSkills.classList.add('active');
            })

            toggleTraces.addEventListener("click", () => {
                sections.forEach(section => {
                    section.classList.remove('open');
                })
                traces.classList.add('open');
                allToggle.forEach(toggle => {
                    toggle.classList.remove('active');
                })
                toggleTraces.classList.add('active');
            })
            
            toggleEidolons.addEventListener("click", () => {
                sections.forEach(section => {
                    section.classList.remove('open');
                })
                eidolons.classList.add('open');
                allToggle.forEach(toggle => {
                    toggle.classList.remove('active');
                })
                toggleEidolons.classList.add('active');
            })
            
            toggleVoicelines.addEventListener('click', () => {
                sections.forEach(section => {
                    section.classList.remove('open');
                })
                voicelines.classList.add('open');
                allToggle.forEach(toggle => {
                    toggle.classList.remove('active');
                })
                toggleVoicelines.classList.add('active');
            })
            
            toggleStories.addEventListener('click', () => {
                sections.forEach(section => {
                    section.classList.remove('open');
                })
                stories.classList.add('open');
                allToggle.forEach(toggle => {
                    toggle.classList.remove('active');
                })
                toggleStories.classList.add('active');
            })
    </script>
{% endblock %}